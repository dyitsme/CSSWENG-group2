<html>
    <head>
        <title>G. Ilagan Designs and Construction</title>
        <script src="../../JS/querylib.js"></script>
        <script src="../../JS/redirect.js"></script>
        <link rel="stylesheet" href="../../CSS/homeStyle.css">
    </head>
    <body>
        <div id="topbar">
            <div id="redbox">
                <nav id="navbar">
                    <button id="{{ID}}" style="{{design}}" onclick="{{act}}">{{Content}}</button>
                    <button id="changePassword" onclick="changePassword()">Change Password</button>
                    <button id="logout" onclick="logoutUser()">Logout</button>
                </nav>
            </div>
    
            <a href="/admanagerhome">Files</a>
            <a href="/profile">Profile</a>

            <form class="search" action="">
                <input type="image" src="/pictures/Search.png">
                <input type="text" placeholder="Search">
            </form>
        </div>

        <div class="title-action">
            <h1 id="title">Files</h1>
            <h2 id="errorcode">{{error}}</h3>
            <div class="action">
                <img src="/pictures/Upload.png" width="30px" height="30px" alt="">
                <label for="uploadFile">Upload</label>

                <form action="/uploadfile" method="post" enctype="multipart/form-data">
                    <input type="file" id="uploadFile" onchange="this.form.submit()" name="file" multiple="multiple">
                </form>
                <div>
                    <img src="/pictures/New Folder.png" width="45px" height="30px" alt="">
                    <button onclick="openForm()">New Folder</button>
                    <form class="formpopup" id="popup" method="POST" action="/createfolder">
                        <div class="popup-content">
                            <label for="foldername"><b>Folder Name:</b></label>
                            <input type="text" placeholder="Name" name="foldername" required>
                             <select id="accesslevel" name="accesslevel" required="true">
                                <option value="" selected disabled hidden>Role</option>
                                <option value="Admin/Manager">Admin/Manager Level</option>
                                <option value="Unrestricted">Unrestricted</option>
                            </select>
                            <button type="submit" id="createbutton">Create Folder</button>
                            <button type="button" id="cancelbutton" onclick="closeForm()">Cancel</button>
                        </div>
                    </form>
                    <form class="formpopup" id="folderpop" method="POST" action="/rename-folder">
                        <div class="popup-content">
                            <label for="newname1"><b>Folder Name:</b></label>
                            <input type="text" placeholder="Name" name="newname1" id="newname1" required>
                            <button type="submit" id="createbutton"  onclick="renameFolder()" >Rename Folder</button>
                            <button type="button" id="cancelbutton" onclick="folderClose()">Cancel</button>
                        </div>
                    </form>
                    <form class="formpopup" id="filepop" method="POST" action="/rename-file">
                        <div class="popup-content">
                            <label for="newname2"><b>File Name:</b></label>
                            <input type="text" placeholder="Name" name="newname2" id="newname2" required>
                            <button type="submit" id="createbutton" onclick="renameFile()">Rename File</button>
                            <button type="button" id="cancelbutton" onclick="fileClose()">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <h2>{{path}}</h2>
        <div class="folder-file">
        {{#each folders}}
            <div class="folder" id="{{this.name}}" oncontextmenu="contextMenu('{{this.name}} cm'); return false">
                <img src="/pictures/Folder.png" alt="">
                <p>{{this.name}}</p>
            </div>

            <div class="context-menu" id="{{this.name}} cm">
                <p onclick="folderForm('{{this.name}}')">Rename</p>
                <p onclick="deleteFolder('{{this.name}}')">Delete</p>
            </div>
        {{/each}}


        {{#each files}}
            <div class="file" oncontextmenu="contextMenu('{{this.name}} cm'); return false">
                <img src="/pictures/File.png" alt="">
                <p>{{this.name}}</p>
            </div>
            
            <div class="context-menu" id="{{this.name}} cm">
                <p onclick="fileForm('{{this.name}}')">Rename</p>
                <p onclick="deleteFile('{{this.name}}')">Delete</p>
            </div>
        {{/each}}
       
        </div>
    </body>
</html>